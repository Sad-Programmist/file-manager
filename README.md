# Тестовое задание на CaseLab Java
Данный проект представляет собой микросервис, который будет выполнять роль хранилища различных файлов и их атрибутов.

## Описание решения
Микросервис предоставляет функциональность для загрузки файлов, получения файла по его идентификатору и получения списка всех файлов с поддержкой пагинации. 

### Создание файла
При создании файла выполняется следующий порядок дейстивий:
1. Контроллер получает `POST-запрос`;
2. Контроллер вызывает метод сервиса `uploadFile(fileUploadDto)`;
3. Маппер преобразует `FileUploadDto` в `FileEntity`;
4. `FileEntity` сохраняется в репозиторий;
5. Сервис возвращает в контроллер `id` сохраненного файла;
6. Контроллер возвращает `ResponseEntity`, содержащий статус `200 (OK)` и `id`.

### Получение файла
При получении файла выполняется следующий порядок дейстивий:
1. Контроллер получает `GET-запрос`;
2. Контроллер вызывает метод сервиса `getFileById(id)`;
3. Сервис получает из репозитория `Optional<FileEntity>`;
4. Маппера преобразует `Optional<FileEntity>` в `Optional<FileDto>`;
5. Сервис возвращает в `Optional<FileDto>` контроллер;
6. Если `Optional<FileDto>` пустой, то контроллер возвращает пустой `ResponseEntity` со статусом `404 (NotFound)`, иначе - `ResponseEntity`, содержащий стстус `200 (OK)` и `FileDto`.

### Получение списка всех файлов
При получении списка всех файлов выполняется следующий порядок дейстивий:
1. Контроллер получает `GET-запрос`;
2. Контроллер создает объект `Pageable` (на основе параметров запроса size и page, а также sortBy);
3. Контроллер вызывает метод сервиса `getAllFiles(pageable)`;
4. Сервис получает все записи из репозитория;
5. Сервис с помощью маппера преобразует `Page<FileEntity>` в `Page<FileDto>`;
6. Сервис возвращает `Page<FileDto>` в контроллер;
7. Контроллер получает из `Page<FileDto>` с помощью `getContent()` `List<FileDto>`;
8. Контроллер возвращает `ResponseEntity`, содержащий статус `200 (OK)` и `List<FileDto>`.

## Инструкция по запуску
1. Скачать исходный код из данного репозитория:
   - с помощью команды
     ```bash
     git clone https://github.com/Sad-Programmist/file-manager.git
     ```
   - в виде ZIP архива;
2. Перейти в каталог проекта
   ```bash
   cd your-folder
   ```
3. Запустить приложение с помощью Docker Compose
   ```bash
   docker-compose up
   ```

## Пример тестовых запросов

### Создание файла
**Тип запроса**: POST  

**URL**: `http://localhost:8080/api/files`

**Тело запроса**:
```json
{  
  "title": "title",  
  "fileContent": "fileContent",  
  "description": "description"  
}
```

**Пример запроса**:
```json
{  
  "title": "Test File",  
  "fileContent": "VGhpcyBpcyBhIHRlc3QgZmlsZSBjb250ZW50Lg==",  
  "description": "File for test upload function"  
}
```


### Получение файла
**Тип запроса**: GET  

**URL**: `http://localhost:8080/api/files/{id}`

**Параметры**:
- `id`: идентификатор файла, который необходимо получить.


### Получение списка всех файлов
**Тип запроса**: GET  

**URL**: `http://localhost:8080/api/files?size={size}&page={page}`

**Параметры**:
- `size`: количество записей на странице;
- `page`: номер отображаемой страницы.
